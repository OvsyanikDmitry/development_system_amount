# Документация решения по разработке системы расчетов зарплаты для частного предприятия в сфере развлекательных услуг.


Ниже представлены шаги проектирования архитектуры, выбор инструментов для реализации проекта и план решения:


# 1.Сбор требований. 
В этом этапе были определены требования заказчика к системе.

# 2.Согласование требований исходя из технической возможности реализации проекта.
На этом этапе было проанализировано, какие из требований возможно реализовать с использованием выбранных инструментов.

# 3.Проектирование схемы решения. 
На этом этапе были определены инструменты для реализации проекта и выбрана архитектура системы.
 	
	3.1. Выбор инструментов для реализации решения.
Для проекта были выбраны следующие инструменты: 
  		
		3.1.1. Excel - в качестве источника данных. 
  		
		3.1.2. Apache Airflow - для разработки и управления ETL процессом. 
  		
		3.1.3. PostgreSql - для хранения и обработки данных. 
  		
		3.1.4. Docker - для разработки инфраструктуры и дальнейшей работы приложения. 
  		
		3.1.5. Amazon S3 bucket storage - в качестве буфера и хранилища данных. 
  		
		3.1.6. Metabase - для визуализации данных.




3.2. Выбор провайдера для аренды виртуальной машины. 
Был выбран Yandex Compute Cloud, так как это прозрачная и точная система тарифов для клиентов, круглосуточная поддержка, вся документация на русском языке, удобная навигация для поиска информации, гибкая настройка виртуальных машин и широкий выбор операционных систем.

В результате проектирования была выбрана оптимальная архитектура системы и необходимые инструменты для ее реализации.



 


# 4.План разработки решения.
	
	4.1. Создать правило или стандарт наименования всех объектов в системе. Правила наименования файлов, таблиц, сущностей. Это необходимо для дальнейшей автоматизации системы, масштабирования, унификации кода и передачи сторонним разработчикам. Необходимо разработать соответствующую документацию.
	
	4.2. Разработка источника данных. 
		4.2.1. Разработать простой Excel файл с таблицами для ведения смены, согласовав все необходимые условия учета показателей. Необходимо использовать ВПР, проверку данных и сводные таблицы. Важно помнить о простоте использования, учитывая возможности заказчика.  
	
	4.3. Проектирование слоев хранилища на основе требований к итоговым отчетам, которые хочет видеть заказчик. Важное примечание* в staging слой данные поступают в таком виде каком они есть(«As Is»). Поэтому проектирование staging слоя требует сохранения структуры файла Excel.
	
	4.4. Было решено придерживаться модели Кимбала, на основе витрин строится модель хранилища данных. Витрины должны соответствовать бизнес-процессам. Под требования определяем необходимые метрики и структуру витрин данных. 	Определяем бизнес-процессы, на их основе проектируем структуру и слои хранилища (DWH). На начальном этапе данных поступает не много, сущностей так же мало. Такое решение самое оптимальное для дальнейшей реализации системы расчетов. 
	
	4.5. Разработка SQL скриптов для дальнейшей миграции данных между слоями хранилища. 
		4.5.1. Спроектировать слои и структуру для слоев STG; DDS; CDM (REP)
	
	4.6. Разработка SQL скриптов для расчета необходимых метрик. 
	
	4.7. Разработка Python скриптов для подключения по API к источнику данных, чтения данных и миграции данных. 
		4.7.1. Разработка DAG скриптов для реализации Data Pipeline и создания ETL процесса. 
	
	4.8. Автоматизация процесса загрузки, обработки и выгрузки данных данных.
	
	4.9. Тестирование решения.



